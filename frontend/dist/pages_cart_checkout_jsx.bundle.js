"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk"] = self["webpackChunk"] || []).push([["pages_cart_checkout_jsx"],{

/***/ "./components/notification.js":
/*!************************************!*\
  !*** ./components/notification.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FailNotify: () => (/* binding */ FailNotify),\n/* harmony export */   SuccessNotify: () => (/* binding */ SuccessNotify)\n/* harmony export */ });\n/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sweetalert2 */ \"./node_modules/.pnpm/sweetalert2@11.7.27/node_modules/sweetalert2/dist/sweetalert2.all.js\");\n/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\nconst SuccessNotify = (title) =>\r\n  sweetalert2__WEBPACK_IMPORTED_MODULE_0___default().fire({\r\n    icon: \"success\",\r\n    title: title,\r\n    timer: 1500,\r\n    showConfirmButton: false,\r\n  });\r\n\r\nconst FailNotify = (title) =>\r\n  sweetalert2__WEBPACK_IMPORTED_MODULE_0___default().fire({\r\n    icon: \"error\",\r\n    title: title,\r\n    timer: 1500,\r\n    showConfirmButton: false,\r\n  });\r\n\n\n//# sourceURL=webpack:///./components/notification.js?");

/***/ }),

/***/ "./pages/cart/checkout.jsx":
/*!*********************************!*\
  !*** ./pages/cart/checkout.jsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Component: () => (/* binding */ Component)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/.pnpm/react-router-dom@6.15.0_react-dom@18.2.0_react@18.2.0/node_modules/react-router-dom/dist/index.js\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/.pnpm/react-router@6.15.0_react@18.2.0/node_modules/react-router/dist/index.js\");\n/* harmony import */ var _components_notification_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/components/notification.js */ \"./components/notification.js\");\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\nvar CheckBar = function CheckBar() {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"cart_lower\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"cart_lower_container\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__.Link, {\n    className: \"w-2/5 cart_lower_img_area\",\n    to: \"/\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"img\", {\n    className: \"cart_lower_img\",\n    src: \"/static/img/logobar_white.png\",\n    alt: \"\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n    className: \"cart_logo_text\"\n  }, \"\\u7D50\\u5E33\"))));\n};\nvar OrderRow = function OrderRow(_ref) {\n  var img = _ref.img,\n    name = _ref.name,\n    price = _ref.price,\n    num = _ref.num;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"title  !h-28\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"w-[60%] flex gap-2\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"product_img bg_img\",\n    style: {\n      backgroundImage: \"url(\".concat(img == null ? \"/static/img/logo1.png\" : \"\".concat(img.slice(1)), \")\")\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", null, name)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n    className: \"w-[10%] text-center\"\n  }, \"$\".concat(price)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n    className: \"w-[10%] text-center\"\n  }, num), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n    className: \"w-[20%] text-right\"\n  }, \"$\".concat(num * price)));\n};\nvar OrderArea = function OrderArea(_ref2) {\n  var items = _ref2.items;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"order_container\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"title\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n    className: \"w-[60%] text-xl font-extrabold\"\n  }, \"\\u8A02\\u55AE\\u5167\\u5BB9\"), [\"單價\", \"數量\"].map(function (i) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n      className: \"w-[10%] text-center\"\n    }, i);\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n    className: \"w-[20%] text-right\"\n  }, \"\\u7E3D\\u50F9\")), items.map(function (i) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(OrderRow, {\n      name: i.name,\n      img: i.photo,\n      num: i.count,\n      price: i.price\n    });\n  }));\n};\nvar Summarize = function Summarize(_ref3) {\n  var infos = _ref3.infos,\n    onclick = _ref3.onclick;\n  var end = 0;\n  Object.entries(infos).map(function (i) {\n    end += i[1];\n  });\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"title !h-fit flex justify-end p-5\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"w-[20%]\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"\"\n  }, Object.entries(infos).map(function (info) {\n    if (info[1] !== 0) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: \"flex by-10 justify-between\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", null, info[0]), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", null, \"$\".concat(info[1])));\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"flex by-10 justify-between\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", null, \"\\u7E3D\\u91D1\\u984D\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", null, end))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"flex justify-end\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n    className: \"create_order_btn\",\n    onClick: onclick\n  }, \"\\u4E0B\\u8A02\\u55AE\"))));\n};\nvar Component = function Component() {\n  var _React$useState = react__WEBPACK_IMPORTED_MODULE_0___default().useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    OrderItem = _React$useState2[0],\n    setItem = _React$useState2[1];\n  var _React$useState3 = react__WEBPACK_IMPORTED_MODULE_0___default().useState(0),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    total = _React$useState4[0],\n    setTotal = _React$useState4[1];\n  var _React$useState5 = react__WEBPACK_IMPORTED_MODULE_0___default().useState([]),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    couponlist = _React$useState6[0],\n    setList = _React$useState6[1];\n  var _React$useState7 = react__WEBPACK_IMPORTED_MODULE_0___default().useState(\"\"),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    coupon = _React$useState8[0],\n    setcoupon = _React$useState8[1];\n  var _React$useState9 = react__WEBPACK_IMPORTED_MODULE_0___default().useState({\n      \"商品總金額：\": 0,\n      運費總金額: 60\n    }),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    info = _React$useState10[0],\n    setInfo = _React$useState10[1];\n  var _React$useState11 = react__WEBPACK_IMPORTED_MODULE_0___default().useState(\"\"),\n    _React$useState12 = _slicedToArray(_React$useState11, 2),\n    payment = _React$useState12[0],\n    setPay = _React$useState12[1];\n  var _React$useState13 = react__WEBPACK_IMPORTED_MODULE_0___default().useState(\"\"),\n    _React$useState14 = _slicedToArray(_React$useState13, 2),\n    addr = _React$useState14[0],\n    setAddr = _React$useState14[1];\n  var navigation = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_3__.useNavigate)();\n  var coupon_change = function coupon_change(e) {\n    var index = parseInt(e.target.value);\n    setcoupon(e.target.value);\n    var chosen = couponlist[index];\n    console.log(chosen);\n    if (chosen.discount_type === 0) {\n      setInfo({\n        \"商品總金額：\": total,\n        運費總金額: 60,\n        運費折抵: -60\n      });\n    } else if (chosen.discount_type === 1) {\n      setInfo({\n        \"商品總金額：\": total,\n        \"優惠券折價: \": -parseInt(total * (1 - parseInt(chosen.discount) / 100)),\n        運費總金額: 60\n      });\n    } else {\n      setInfo({\n        \"商品總金額：\": total,\n        \"優惠券折價: \": -parseInt(chosen.discount),\n        運費總金額: 60\n      });\n    }\n  };\n  var handle_upload = function handle_upload() {\n    var data = {};\n    data.product = OrderItem;\n    data.address = addr;\n    data.payment = payment;\n    if (coupon !== \"\") {\n      data.coupon_id = couponlist[coupon].id;\n    }\n    fetch(\"/api/product/CreateOrder\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    }).then(function (res) {\n      if (res.status === 200) {\n        return res.json();\n      }\n    }).then(function (data) {\n      if (data.cause === 0) {\n        (0,_components_notification_js__WEBPACK_IMPORTED_MODULE_1__.SuccessNotify)(\"上傳訂單成功\").then(function () {\n          navigation(\"/\");\n        });\n      } else {\n        (0,_components_notification_js__WEBPACK_IMPORTED_MODULE_1__.FailNotify)(\"上傳訂單發生錯誤\");\n      }\n    });\n  };\n  react__WEBPACK_IMPORTED_MODULE_0___default().useEffect(function () {\n    var value = \"; \".concat(document.cookie);\n    var parts = value.split(\"; orders=\");\n    console.log(parts);\n    var product_ids = \"\";\n    if (parts.length === 2) {\n      product_ids = parts.pop().split(\";\").shift();\n    }\n    fetch(\"/api/product/GetCartProducctsById\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: product_ids\n    }).then(function (res) {\n      if (res.status === 200) {\n        return res.json();\n      }\n    }).then(function (data) {\n      if (data.cause === 0) {\n        console.log(data.data);\n        setItem(data.data);\n        var temp = 0;\n        data.data.map(function (i) {\n          temp += i.price * i.count;\n        });\n        setTotal(temp);\n        info[\"商品總金額\"] = temp;\n        setInfo(info);\n        return data.data;\n      }\n    }).then(function (data) {\n      fetch(\"/api/coupon/GetCoupons\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          shop_id: data[0].shop_id\n        })\n      }).then(function (res) {\n        if (res.status === 200) {\n          return res.json();\n        }\n      }).then(function (data) {\n        console.log(data);\n        if (!data[\"no coupon\"]) {\n          setList(data);\n        }\n      });\n    });\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CheckBar, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"main mb-10\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(OrderArea, {\n    items: OrderItem\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"title h-20 justify-end mb-5\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"select\", {\n    value: coupon,\n    className: \"new_name_input w-full px-5 py-1\",\n    onInput: coupon_change\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"option\", {\n    value: \"\",\n    disabled: true,\n    selected: true\n  }, \"\\u8ACB\\u9078\\u64C7\\u512A\\u60E0\\u5377\"), couponlist === null || couponlist === void 0 ? void 0 : couponlist.map(function (c, i) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"option\", {\n      value: i\n    }, c.name);\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"title h-20 justify-end mb-5\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"select\", {\n    value: payment,\n    className: \"new_name_input w-full px-5 py-1\",\n    onInput: function onInput(e) {\n      return setPay(e.target.value);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"option\", {\n    value: \"\",\n    disabled: true,\n    selected: true\n  }, \"\\u8ACB\\u9078\\u64C7\\u4ED8\\u6B3E\\u65B9\\u5F0F\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"option\", {\n    value: \"0\"\n  }, \"\\u8CA8\\u5230\\u4ED8\\u6B3E\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"option\", {\n    value: \"1\"\n  }, \"\\u4FE1\\u7528\\u5361\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"option\", {\n    value: \"2\"\n  }, \"ATM\\u8F49\\u5E33\"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"title h-20 justify-end mb-5\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", {\n    className: \"new_name_input w-full px-5 py-1\",\n    value: addr,\n    onInput: function onInput(e) {\n      return setAddr(e.target.value);\n    },\n    placeholder: \"\\u8ACB\\u8F38\\u5165\\u5730\\u5740\"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Summarize, {\n    infos: info,\n    onclick: handle_upload\n  })));\n};\n\n//# sourceURL=webpack:///./pages/cart/checkout.jsx?");

/***/ })

}]);